import matplotlib.pyplot as plt
import seaborn as sns
import numpy as np

"""
# Plot the metrics for the different steps

# Data
steps = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1]
mae_mean = [10.058623733008634, 8.560896461794314, 9.879040653433982, 9.525472436383854, 7.252515385119223, 6.1670945220643265, 6.021110615285308, 5.177050462539151, 4.426676515497092, 3.8351086001349186]
mse_mean = [501.54866371792957, 372.18703845096377, 419.8725091682197, 742.9071686730126, 200.4277394771159, 132.32625527383345, 120.86075881377779, 89.19372902166154, 55.79992345679397, 37.69192920474931]
r2_mean = [-20.701377419813653, -10.721126987746143, -10.477738580389387, -9.267188079911918, -6.6646852832329095, -4.145374030018604, -3.2050172278012763, -2.054158928600969, -1.3565696889466543, -0.7603102958122225]
rmse_mean = [15.664700042520135, 13.022514388172386, 14.40512047059607, 16.419297465733955, 10.522685824944327, 9.06900498803316, 8.854913229419532, 7.657038355692762, 6.440765549993271, 5.414805693201389]

# Plotting
fig, axs = plt.subplots(2, 2, figsize=(14, 10))

# MAE
axs[0, 0].plot(steps, mae_mean, marker='o')
axs[0, 0].set_title('Mean Absolute Error (MAE)')
axs[0, 0].set_xlabel('Step')
axs[0, 0].set_ylabel('MAE')

# MSE
axs[0, 1].plot(steps, mse_mean, marker='o')
axs[0, 1].set_title('Mean Squared Error (MSE)')
axs[0, 1].set_xlabel('Step')
axs[0, 1].set_ylabel('MSE')

# R²
axs[1, 0].plot(steps, r2_mean, marker='o')
axs[1, 0].set_title('R-squared (R²)')
axs[1, 0].set_xlabel('Step')
axs[1, 0].set_ylabel('R²')

# RMSE
axs[1, 1].plot(steps, rmse_mean, marker='o')
axs[1, 1].set_title('Root Mean Squared Error (RMSE)')
axs[1, 1].set_xlabel('Step')
axs[1, 1].set_ylabel('RMSE')


plt.tight_layout()
plt.show()
"""

# Plot the metrics for each step
# Provided data
"""
steps = 10
mae_values = [10.516285316803907, 30.304745303376567, 9.806142428996177, 10.263945971628848, 1.9729368684631612, 25.923822215199756, 1.1480694224768995, 23.284732713113865, 4.791356007684528, 5.71722234177204, 6.1989708221719795, 7.847553287949193, 3.8515510454800284, 9.900184593457368, 1.5047471663128258, 7.905714223251023]
mse_values = [357.60683595346, 3543.3621816477103, 140.73502801484227, 211.21945491163905, 8.374450869926205, 2131.6695574684136, 2.0399937008895943, 1053.578587345617, 41.49916435529316, 70.06756114969292, 58.11704085162258, 110.9995030737701, 23.56850710716401, 175.66857209001532, 4.88869165612498, 91.38348929069107]
r2_values = [-7.38657320178657, -222.89640915510086, -2.6088217966495875, -4.1429917039555395, -11.183788490004028, -13.457449173414812, -3.2206766225301955, -3.842338788349201, -1.11113419633896, -1.969958791981584, -4.016916681324924, -5.4200205884811865, -1.4429652352592912, -19.723779640977032, -19.68071675916561, -9.117497891699099]
rmse_values = [18.910495391540117, 59.526147041848006, 11.863179506980508, 14.533391032778242, 2.8938643489158586, 46.170007120081905, 1.4282834805771556, 32.45887532471846, 6.441984504428209, 8.370636842540293, 7.623453341604616, 10.535630169751125, 4.854740683822773, 13.2540021159654, 2.211038592183542, 9.559471182585943]

steps = 1
mae_values = [4.082858869484024, 5.120305714084049, 5.903409781132872, 5.913213492883834, 0.7902727251047029, 6.657295483154149, 0.8315392367506573, 6.272029081450017, 3.996740363073592, 4.156688226579121, 3.818596011262544, 3.702846922317725, 2.8494313923806107, 3.084552740995746, 0.5561013132031187, 3.625856248301939]
mse_values = [36.1229882139381, 46.68068759929844, 83.69883406211274, 95.59010483888606, 1.1001651783666855, 86.89876901746162, 1.1506247581107167, 86.58172047910855, 30.308808601403207, 40.010574015362735, 23.025068147922116, 23.534540836434118, 12.172733906623202, 16.353066115073844, 0.5030712844496572, 19.33911022143716]
r2_values = [0.1528459345142612, -1.949638731402223, -1.363417728418137, -1.5296649542439136, -0.6380598224425686, 0.39023441178005847, -1.3999297785481928, 0.6004531811608467, -0.5589657136091575, -0.7147684681773052, -0.9496168856404639, -0.41610523501107854, -0.38191356912979546, -1.097896396518185, -1.3568405463983932, -0.9516804309113127]
rmse_values = [6.010240279218302, 6.832326660757552, 9.148706687948453, 9.777019220543963, 1.0488875909108113, 9.321950923356205, 1.0726717848954157, 9.304929901891176, 5.505343640628004, 6.325391214412176, 4.798444346652581, 4.851241164530384, 3.4889445261601972, 4.043892446031897, 0.7092751824571738, 4.397625520827934]

# Convert data to numpy arrays
mae_values = np.array(mae_values)
mse_values = np.array(mse_values)
r2_values = np.array(r2_values)
rmse_values = np.array(rmse_values)

# Adjust values to be positive for log scale
mse_values = mse_values + 1  # Adding 1 to avoid log(0)
rmse_values = rmse_values + 1  # Adding 1 to avoid log(0)
r2_values = r2_values * -1  # Invert values to be positive

# Data and labels
data = [mae_values, mse_values, r2_values, rmse_values]
labels = ['MAE', 'MSE', '-R²', 'RMSE']

# Create subplots with increased size
fig, axs = plt.subplots(2, 2)
fig.suptitle('Boxplots of Error Metrics (Logarithmic Scale) for Step '+ str(steps))

# Plot each boxplot in a subplot
for i, ax in enumerate(axs.flatten()):
    sns.boxplot(data=data[i], ax=ax)
    ax.set_title(labels[i], fontsize=14)
    ax.set_ylabel('Values', fontsize=12)
    ax.set_yscale('log')

plt.tight_layout(rect=[0, 0, 1, 0.96])
plt.show()
"""

# Provided data (example for 10 steps, expand as necessary)
mae_values = [
    [4.082858869484024, 5.120305714084049, 5.903409781132872, 5.913213492883834, 0.7902727251047029, 6.657295483154149, 0.8315392367506573, 6.272029081450017, 3.996740363073592, 4.156688226579121, 3.818596011262544, 3.702846922317725, 2.8494313923806107, 3.084552740995746, 0.5561013132031187, 3.625856248301939],
    [4.739229076272946, 6.941491315136009, 7.004613441943359, 6.320554854869602, 0.9479188640633629, 8.22820757713006, 0.7197177176681805, 8.457168809813368, 4.090459991719275, 4.032761688595176, 4.230114370213937, 4.015252777507377, 2.8388727046254973, 3.80905206016301, 0.5220103871172392, 3.9293986111150634],
    [5.985783052341041, 9.192775897235748, 6.88221358257419, 5.331900933795651, 0.8971767783660075, 11.561076363520897, 0.8720941111114632, 11.502401559757581, 4.397491960125119, 4.73327477314683, 4.2826410237719195, 4.901314354673524, 3.114467904999712, 4.375492947298486, 0.5264202695466341, 4.2762818883616225],
    [5.774591319208663, 10.334945690613319, 10.920231298473698, 10.558584687506503, 0.8831563606601194, 13.693797358189423, 0.7415762157535348, 12.334884602024715, 3.832436813679818, 3.948047624563513, 4.710033422536907, 5.345055175652994, 3.2771746327425983, 4.740868168573997, 0.5362513428795154, 4.706135131505613],
    [6.780338590438744, 11.993439370633537, 7.901113217002478, 4.967831888440686, 1.5707841718251507, 13.035967720691593, 1.171349035209955, 16.79309931771649, 4.506141288495829, 4.410627960859776, 5.159061833464935, 5.870324246999244, 3.0597501798235927, 5.109902639346815, 0.7315891387170633, 5.612191753363327],
    [9.046237758553993, 18.60482461955459, 8.304983560102666, 5.677476244052197, 1.159471458799289, 20.85475088815577, 0.7643192878337621, 15.503386177226577, 4.534390140412979, 4.695969306837353, 5.833115583478308, 5.559189486593625, 3.4792508609555743, 6.900107166214395, 0.7556352830173486, 4.367138340119134],
    [8.471645246333361, 12.832711024068683, 15.266989026479491, 17.207836323248614, 1.3759714731240875, 18.802713004666472, 1.5233566125253328, 38.70332544753226, 5.37165103830256, 5.016421060796767, 6.032464705744366, 5.697846936098879, 3.5905954429356517, 5.852146100645869, 1.0672785267350506, 5.594607012904222],
    [8.80352522641928, 19.194728392432168, 13.527351703277308, 13.261781475306847, 1.5612253563709568, 36.851268898195606, 0.7768893811262156, 24.35716120110674, 5.303137792568699, 4.5125365001781566, 7.0315545309491005, 8.088568041773092, 3.456730483143275, 5.729894496975384, 0.903455239618837, 4.704841735502055],
    [7.241957428511703, 23.15714091210207, 7.1267521264279, 5.906015715506338, 1.3388219095992944, 31.343260916615545, 0.942584146082872, 21.75781626214004, 4.34948450825741, 4.703925259838423, 6.317903427814252, 8.167100015449236, 3.38599743028185, 5.764581290354475, 0.8304362058439819, 4.640565833883636],
    [10.516285316803907, 30.304745303376567, 9.806142428996177, 10.263945971628848, 1.9729368684631612, 25.923822215199756, 1.1480694224768995, 23.284732713113865, 4.791356007684528, 5.71722234177204, 6.1989708221719795, 7.847553287949193, 3.8515510454800284, 9.900184593457368, 1.5047471663128258, 7.905714223251023]
]
mse_values = [
    [36.1229882139381, 46.68068759929844, 83.69883406211274, 95.59010483888606, 1.1001651783666855, 86.89876901746162, 1.1506247581107167, 86.58172047910855, 30.308808601403207, 40.010574015362735, 23.025068147922116, 23.534540836434118, 12.172733906623202, 16.353066115073844, 0.5030712844496572, 19.33911022143716],
    [57.88478783665658, 100.91265313496238, 124.713278567973, 133.5398351252918, 1.6546453991767547, 139.81493108778855, 0.9478118110301873, 146.15716099220901, 33.62984148956502, 36.89189850518011, 28.075407644071486, 26.72005095236484, 12.358648469269086, 25.478285179219, 0.5699713504158531, 23.449567763529853],
    [95.78435786816785, 216.55473464564838, 98.72282282193413, 62.374129351027136, 1.5398930351779043, 234.22086547677122, 1.3042512718673924, 483.2158180038697, 38.76522585814201, 50.943212890386256, 29.184297183121355, 39.83692342854866, 14.69697361282704, 33.44106023684257, 0.5085379542511225, 26.006560708001903],
    [86.16522263017832, 280.6121993834694, 307.19121270796654, 369.650094470838, 1.3341511597400408, 391.5391801443701, 1.0921421816814452, 262.2644520966843, 30.14010927325278, 35.71234150113384, 33.90263233520342, 49.98368058479778, 15.600118918130848, 36.935441309404276, 0.5594236885467708, 31.089738635046835],
    [127.33573099997892, 471.4678701522596, 96.7996117616739, 62.24375662647179, 4.359835517036986, 331.0588896582033, 2.510750691863517, 728.3882128423073, 38.045673287507945, 40.413881547996084, 45.37938781492239, 60.973972413410294, 14.448453894788477, 46.127888421462835, 1.0659353393007893, 46.600233412151226],
    [215.12988564878285, 1075.088591948502, 112.28605039542572, 84.22082109637944, 2.590630954597652, 977.6764960893821, 0.8557471206721134, 429.08448589223696, 39.64419455531592, 41.31599430561558, 54.21662949554423, 49.50571466087286, 19.21782484372279, 76.91587074440673, 1.0986569903757866, 27.99623689202165],
    [183.2466336131995, 324.17820002087194, 755.2313787187836, 1078.3779143618763, 3.582909067318144, 652.0271577826088, 4.569570617493504, 8554.79122314968, 51.132153402116515, 52.7580990143561, 55.2398062710317, 49.2332891295041, 18.519312428902168, 52.929331603836395, 1.8442383340251298, 48.85348125260016],
    [202.57072608906083, 1495.7646443585309, 385.5305795780576, 282.6119395821159, 3.7476227524553414, 2851.683155336502, 1.0316578052467436, 1107.743530455247, 49.41419983250064, 39.88750653452186, 84.23656686714206, 104.81185602667622, 17.487702012375074, 55.00111836978607, 1.493632566992317, 34.94370852430521],
    [202.74456341342835, 1888.888733441467, 89.90885530106105, 73.07085002421354, 3.134321839340392, 2155.432743453624, 1.328386073029064, 1189.8720474889867, 32.81228437708399, 40.87784642827597, 63.36640696657497, 108.06954960522624, 17.830918475511933, 56.9045287973919, 1.2286108938040108, 29.521968636400636], 
    [357.60683595346, 3543.3621816477103, 140.73502801484227, 211.21945491163905, 8.374450869926205, 2131.6695574684136, 2.0399937008895943, 1053.578587345617, 41.49916435529316, 70.06756114969292, 58.11704085162258, 110.9995030737701, 23.56850710716401, 175.66857209001532, 4.88869165612498, 91.38348929069107]
]
r2_values = [
    [0.1528459345142612, -1.949638731402223, -1.363417728418137, -1.5296649542439136, -0.6380598224425686, 0.39023441178005847, -1.3999297785481928, 0.6004531811608467, -0.5589657136091575, -0.7147684681773052, -0.9496168856404639, -0.41610523501107854, -0.38191356912979546, -1.097896396518185, -1.3568405463983932, -0.9516804309113127],
    [-0.3575104322815119, -5.3764242877158575, -2.4529618915908094, -2.472853699459526, -1.4636374628806035, 0.01892357440017589, -0.96098995385556, 0.3282489807896941, -0.710808144912052, -0.5637395753545804, -1.3772476355975853, -0.6077816982445008, -0.4030195802190044, -2.2685492916632084, -1.6702609162339455, -1.3665030083275944],
    [-1.231742521017265, -12.592223950138326, -1.787652567342731, -0.6506483525330624, -1.292780176453955, -0.6435195276716599, -1.6984509073118463, -1.2209019116069455, -0.9720540210706314, -1.1593336564456016, -1.437385538059143, -1.3616919243003172, -0.6469018871060788, -3.2227869431727214, -1.324440009147838, -1.6240289642373833],
    [-1.0207414243341604, -16.73120008236305, -7.505265542626612, -8.613166714517522, -0.9864466307503119, -1.7474165766825895, -1.2596045138236796, -0.20539022380142757, -0.5677391604787048, -0.49730308974288717, -1.8706601015788036, -2.0075858387547125, -0.7710085654031831, -3.7383609092965653, -1.6208461356031076, -2.1375401350631087],
    [-1.986269617545307, -28.790904160411703, -1.73334654066695, -0.6471982118218162, -5.343020529446854, -1.2453137982252858, -4.194656603855552, -2.347735554220811, -0.9354491385018233, -0.7130261258151311, -2.8203730590893668, -2.6464058946539417, -0.5971930325871615, -4.737806293961034, -3.81151368434384, -3.7757722351510923],
    [-3.9386160030966835, -66.1424943476346, -2.003830647520943, -1.1462493811706467, -2.857246679814524, -5.860321388522329, -0.7705112841492003, -0.9721096029007086, -1.0167686774484932, -0.7512640446450276, -3.5280113420437953, -1.934896484438653, -1.1534958716655903, -8.712590821041154, -4.021773190007268, -1.8247847656269416],
    [-3.261714732855723, -19.1430300067962, -19.203641978464276, -26.480947124923787, -4.33467110761697, -3.57525150121284, -8.842152099216777, -37.151927910472075, -1.630036537075, -1.2611003930125402, -3.7979070498730945, -1.8947726621817322, -1.0124616972487321, -5.553013822934265, -7.115057591735853, -4.017323062970814],
    [-3.650302428253119, -92.41497057206706, -8.886033196437147, -5.8813304215638995, -4.452326805118024, -18.34073887414492, -1.222032195916063, -3.940220072566576, -1.5702818612498994, -0.6723542693044364, -6.316448867434067, -5.1626290029184165, -0.9166656171114285, -5.91651052568598, -5.6571479808493255, -2.6438245956098303],
    [-3.7238784405444196, -117.55754954441709, -1.5387711183959705, -0.9337228345404132, -3.5861475441374466, -13.766290173830884, -1.8130528605321352, -4.215379617599139, -0.6692176019593798, -0.7326922388173243, -4.425346253876699, -5.155048837107151, -0.9376551152476962, -6.045170465932013, -4.406160352004566, -2.031948804995966],
    [-7.38657320178657, -222.89640915510086, -2.6088217966495875, -4.1429917039555395, -11.183788490004028, -13.457449173414812, -3.2206766225301955, -3.842338788349201, -1.11113419633896, -1.969958791981584, -4.016916681324924, -5.4200205884811865, -1.4429652352592912, -19.723779640977032, -19.68071675916561, -9.117497891699099]
]
rmse_values = [
    [6.010240279218302, 6.832326660757552, 9.148706687948453, 9.777019220543963, 1.0488875909108113, 9.321950923356205, 1.0726717848954157, 9.304929901891176, 5.505343640628004, 6.325391214412176, 4.798444346652581, 4.851241164530384, 3.4889445261601972, 4.043892446031897, 0.7092751824571738, 4.397625520827934],
    [7.6082052966949165, 10.045529012200522, 11.167509953788848, 11.555943714179808, 1.2863302061200128, 11.824336391011064, 0.9735562700892986, 12.089547592536663, 5.7991242002189445, 6.073870142271739, 5.298623183815914, 5.169144121841143, 3.5154869462521243, 5.047601923608775, 0.7549644696380441, 4.842475375624522],
    [9.786948342980454, 14.715798810993862, 9.935935930848897, 7.897729379449966, 1.2409242664957054, 15.304276052031055, 1.1420382094603456, 21.98217045707429, 6.226172649239821, 7.137451428233067, 5.402249270731716, 6.311649818276411, 3.833663210667708, 5.782824589838651, 0.713118471399474, 5.0996628033627776],
    [9.282522428207665, 16.75148349799114, 17.52687116139006, 19.22628654917111, 1.1550546133149033, 19.787348992332706, 1.0450560662861323, 16.194580948474226, 5.490000844558476, 5.975980379915403, 5.822596700373762, 7.0699137607751465, 3.949698585731682, 6.07745352178067, 0.7479463139469108, 5.575817306462509],
    [11.284313492631217, 21.713310897978218, 9.83867937081364, 7.889471251387623, 2.088021914884273, 18.195023760858444, 1.5845348503152328, 26.988668230246326, 6.168117483277045, 6.357191325420062, 6.736422478951449, 7.808583252640027, 3.8011121918181363, 6.791751498800794, 1.0324414459429596, 6.826436362565114],
    [14.667306693758839, 32.78854360822545, 10.596511236979165, 9.17719026153318, 1.6095437100612249, 31.267818857243338, 0.9250660088188914, 20.71435458546167, 6.296363597769424, 6.427751885816345, 7.363194245403569, 7.036029751278264, 4.383813960893276, 8.770169368057081, 1.0481683979093182, 5.291147029900195],
    [13.536862029776305, 18.004949320141723, 27.481473372415525, 32.83866492965078, 1.8928573816635377, 25.534822454495522, 2.1376554019517515, 92.49211438360396, 7.150675031220236, 7.263477060909334, 7.432348637613261, 7.016643722571647, 4.303407072181549, 7.2752547449444265, 1.3580273686583528, 6.989526539945332],
    [14.232734315269882, 38.675116604330114, 19.634932634925377, 16.811065985895002, 1.9358777731187837, 53.401153127404484, 1.0157055701564028, 33.2827812908604, 7.029523442773389, 6.315655669407719, 9.178048096798255, 10.237766163899048, 4.181829983676414, 7.416273887187963, 1.222142613197133, 5.911320370636767],
    [14.238839960243544, 43.46134757967667, 9.48202801625586, 8.548148923843895, 1.7704016039702382, 46.42663829584934, 1.1525563209791807, 34.494521992469856, 5.728200797552753, 6.393578530703754, 7.960301939410023, 10.395650513807505, 4.222667222918701, 7.54350905066017, 1.1084272162862163, 5.4334122461304775],
    [18.910495391540117, 59.526147041848006, 11.863179506980508, 14.533391032778242, 2.8938643489158586, 46.170007120081905, 1.4282834805771556, 32.45887532471846, 6.441984504428209, 8.370636842540293, 7.623453341604616, 10.535630169751125, 4.854740683822773, 13.2540021159654, 2.211038592183542, 9.559471182585943]
]

# Convert data to numpy arrays
mae_values = np.array(mae_values)
mse_values = np.array(mse_values)
r2_values = np.array(r2_values)
rmse_values = np.array(rmse_values)

#mse_values = mse_values + 1  # Adding 1 to avoid log(0)
#rmse_values = rmse_values + 1  # Adding 1 to avoid log(0)
r2_values = r2_values * -1  # Invert values to be positive

# Combine data for plotting
data = [mae_values, mse_values, r2_values, rmse_values]
labels = ['MAE', 'MSE', '-R²', 'RMSE']

# Plotting evolution of the boxplots
fig, axs = plt.subplots(2, 2)
fig.suptitle('Evolution of Error Metrics Boxplots (Logarithmic Scale)')

for i, ax in enumerate(axs.flatten()):
    sns.boxplot(data=[data[i][j] for j in range(len(data[i]))], ax=ax)
    if labels[i] == '-R²':
        ax.set_ylim(0, 30)
    elif labels[i] == 'MSE':  
        ax.set_ylim(0, 1250)
    ax.set_xticklabels(range(1,len(data[i])+1)) 
    ax.set_title(labels[i], fontsize=14)
    ax.set_xlabel('Steps', fontsize=12)
    ax.set_ylabel('Values', fontsize=12)
    #ax.set_yscale('log')

plt.tight_layout(pad=0.5)
plt.show()